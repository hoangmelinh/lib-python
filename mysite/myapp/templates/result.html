{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <title>PTIT ELIB</title>
    <link rel="stylesheet" href="{% static 'css/result.css' %}">
  </head>
  <body>
    <!-- Header Top -->
    <div class="header-top">
      <div>
        <a href="#">VI</a> | <a href="#"> EN</a>
        <a href="https://www.facebook.com/HocvienPTIT/?locale=vi_VN"
          ><i class="lni lni-facebook"></i
        ></a>
        <a href="https://www.youtube.com/@PChannels"
          ><i class="lni lni-youtube"></i
        ></a>
      </div>
      <div>
        <a href="https://ptit.edu.vn/">Cổng thông tin</a>
      </div>
    </div>

    <!-- Header Bottom -->
    <div class="header-bottom">
      <div class="logo">
        <img  src="{% static 'images/download-logo-vector-hoc-vien-cong-nghe-buu-chinh-vien-thong-mien-phi.jpg' %}">
        <div>
          <strong class="ten">HỌC VIỆN CÔNG NGHỆ BƯU CHÍNH VIỄN THÔNG</strong
          ><br />
          <span>Posts and Telecommunications Institute of Technology</span>
        </div>
      </div>
      <ul class="menu">
        <li><a href="{% url 'home' %}">Trang chủ </a></li>
        <li>
          <a href="#">Giới thiệu</a>
        </li>
        <li><a href="#">Tin tức & Sự kiện</a></li>
        <li><a href="#">Liên hệ</a></li>
        <li>
          <a href="{% url 'logout' %}">Đăng Xuất</a>
        </li>
      </ul>
    </div>

    <div class="container">
        <div class="results-container">
            <div class="results-header">
                <div class="results-count">
                    {% if books %}
                        Tìm thấy {{ books|length }} kết quả 
                    {% else %}
                        Không tìm thấy kết quả
                    {% endif %}
                </div>
                <div class="sort-options">
                    <select>
                        <option>Sắp xếp theo</option>
                        <option>Tên sách (A-Z)</option>
                        <option>Tên sách (Z-A)</option>
                        <option>Tác giả (A-Z)</option>
                    </select>
                </div>
            </div>

            {% if books %}
                <ul class="book-list">
                    {% for book in books %}
                    <li class="book-item">
                        <div class="book-cover">
                            {% if book.title or book.author %}
                                <img src="{{ book.image.url }}" alt="{{ book.title }}">
                            {% else %}
                                <i class="fas fa-book"></i>
                            {% endif %}
                        </div>
                        <div class="book-info">
                            <h3 class="book-title">{{ book.title }}</h3>
                            <div class="book-author">{{ book.author }}</div>
                            <div class="book-meta">
                                <span><i class="fas fa-tag"></i> {{ book.category|default:"Tiểu thuyết" }}</span>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <a href = "{% url 'book_detail' book.id %}" class="btn btn-primary"><i class="fas fa-eye"></i> Xem chi tiết</a>
    
                        </div>
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <div class="no-results">
                    <i class="fas fa-search"></i>
                    <p>Không tìm thấy sách phù hợp với từ khóa "{{ title }}"</p>
                    <p>Vui lòng thử lại với từ khóa khác</p>
                </div>
            {% endif %}
        </div>
    </div>

    <footer>
        <div class="container">
            <p>© 2025 Thư viện Sách Online. Tất cả các quyền được bảo lưu.</p>
        </div>
    </footer>

    <script>
        // Thêm hiệu ứng khi di chuột vào các nút
        document.addEventListener('DOMContentLoaded', function() {
            const buttons = document.querySelectorAll('.btn');
            buttons.forEach(button => {
                button.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                });
                button.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });

            // Xử lý tìm kiếm khi nhấn Enter
            const searchInput = document.querySelector('.search-box input');
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch(this.value);
                }
            });

            // Xử lý click nút tìm kiếm
            const searchButton = document.querySelector('.search-box button');
            searchButton.addEventListener('click', function() {
                performSearch(searchInput.value);
            });

            function performSearch(query) {
                if (query.trim() !== '') {
                    // Trong thực tế, bạn sẽ gửi yêu cầu tìm kiếm đến server ở đây
                    console.log('Tìm kiếm: ', query);
                    // window.location.href = `/search?q=${encodeURIComponent(query)}`;
                }
            }
        });
    </script>
</body>
</html>